<div class="dashboard-main">
  <div class="dashboard-header-row">
    <div>
      <h2 class="welcome">Welcome, {{ userName }}!</h2>
      <div class="date">{{ today | date:'fullDate' }}</div>
    </div>
    <button mat-raised-button color="primary" class="add-btn" (click)="openLogDialog()">
      + Add
    </button>
  </div>

  <div class="progress-row">
    <!-- Water -->
    <div class="progress-card">
      <div class="progress-svg">
        <svg width="110" height="110">
          <circle cx="55" cy="55" r="48" stroke="#e0e3eb" stroke-width="10" fill="none"/>
          <circle cx="55" cy="55" r="48" stroke="#4285f4" stroke-width="10" fill="none"
            [attr.stroke-dasharray]="2 * 3.1416 * 48"
            [attr.stroke-dashoffset]="2 * 3.1416 * 48 * (1 - (getWaterProgress()/100))"
            stroke-linecap="round"
            style="transition: stroke-dashoffset 0.5s;"/>
        </svg>
        <div class="progress-value">
          {{ water | number:'1.0-1' }} / {{ waterGoal }}
          <div class="progress-unit">glasses</div>
        </div>
      </div>
      <div class="progress-label">Water</div>
    </div>
    <!-- Exercise -->
    <div class="progress-card">
      <div class="progress-svg">
        <svg width="110" height="110">
          <circle cx="55" cy="55" r="48" stroke="#e0e3eb" stroke-width="10" fill="none"/>
          <circle cx="55" cy="55" r="48" stroke="#34a853" stroke-width="10" fill="none"
            [attr.stroke-dasharray]="2 * 3.1416 * 48"
            [attr.stroke-dashoffset]="2 * 3.1416 * 48 * (1 - (getExerciseProgress()/100))"
            stroke-linecap="round"
            style="transition: stroke-dashoffset 0.5s;"/>
        </svg>
        <div class="progress-value">
          {{ exercise | number:'1.0-0' }} / {{ exerciseGoal }}
          <div class="progress-unit">minutes</div>
        </div>
      </div>
      <div class="progress-label">Exercise</div>
    </div>
    <!-- Sleep -->
    <div class="progress-card">
      <div class="progress-svg">
        <svg width="110" height="110">
          <circle cx="55" cy="55" r="48" stroke="#e0e3eb" stroke-width="10" fill="none"/>
          <circle cx="55" cy="55" r="48" stroke="#ff6b35" stroke-width="10" fill="none"
            [attr.stroke-dasharray]="2 * 3.1416 * 48"
            [attr.stroke-dashoffset]="2 * 3.1416 * 48 * (1 - (getSleepProgress()/100))"
            stroke-linecap="round"
            style="transition: stroke-dashoffset 0.5s;"/>
        </svg>
        <div class="progress-value">
          {{ sleep | number:'1.0-1' }} / {{ sleepGoal }}
          <div class="progress-unit">hours</div>
        </div>
      </div>
      <div class="progress-label">Sleep</div>
    </div>
    <!-- Mood -->
    <div class="progress-card">
      <div class="progress-svg">
        <svg width="110" height="110">
          <circle cx="55" cy="55" r="48" stroke="#e0e3eb" stroke-width="10" fill="none"/>
          <circle cx="55" cy="55" r="48" stroke="#2196f3" stroke-width="10" fill="none"
            [attr.stroke-dasharray]="2 * 3.1416 * 48"
            [attr.stroke-dashoffset]="2 * 3.1416 * 48 * (1 - (getMoodProgress()/100))"
            stroke-linecap="round"
            style="transition: stroke-dashoffset 0.5s;"/>
        </svg>
        <div class="progress-value">
          <div class="mood-emoji" *ngIf="mood > 0">{{ getMoodEmoji(mood) }}</div>
          <div class="mood-text" *ngIf="mood > 0">{{ getMoodLabel(mood) }}</div>
          <div class="mood-text" *ngIf="mood === 0">Not set</div>
        </div>
      </div>
      <div class="progress-label">Mood</div>
    </div>
  </div>

  <div class="trends-card">
    <div class="trends-title">Weekly Trends</div>
    <apx-chart
      [series]="chartOptions.series!"
      [chart]="chartOptions.chart!"
      [xaxis]="chartOptions.xaxis!"
      [dataLabels]="chartOptions.dataLabels!"
      [title]="chartOptions.title!"
      [stroke]="chartOptions.stroke!"
      [fill]="chartOptions.fill!"
      [yaxis]="chartOptions.yaxis!"
      [grid]="chartOptions.grid!">
    </apx-chart>
  </div>
</div>
